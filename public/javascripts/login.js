const PAGE = {
    init: function() {
      this.bind();
    },
    bind: function() {
      $('#userSubmit').bind('click',this.handleSubmit);
    },
    handleSubmit: function() {
      let phone = $('#userPhone').val();
      let password = $('#userPassword').val();

      if(!phone || !password){
        alert('请输入必要参数');
        return
      }
  
      $.ajax({
          url: '/api/login',
          data: { password, phone },
          type: 'POST',
          beforeSend: function() {
            $("#userSubmit").attr("disabled",true);
          },
          success: function(data) {
            if(data.code === 200){
              alert('登录成功！')
              location.href = '/admin/clue'
            }else{
              alert(data.message)
            }
          },
          error: function(err) {
            console.log(err)
          },
          complete: function() {
            $("#userSubmit").attr("disabled",false);
          }
      })
    }
  }
  
  PAGE.init();